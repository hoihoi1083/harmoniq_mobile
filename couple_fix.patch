--- a/src/app/api/smart-chat2/route.js
+++ b/src/app/api/smart-chat2/route.js
@@ -3435,11 +3435,29 @@
 	// ğŸ” Debug couple analysis condition
 	console.log("ğŸ” DEBUG - åˆå©šåˆ†ææ¢ä»¶æª¢æŸ¥:");
 	console.log("   couplesBirthdayData:", !!couplesBirthdayData);
 	console.log(
 		"   userIntent?.relationshipAnalysisType:",
 		userIntent?.relationshipAnalysisType
 	);
+	console.log(
+		"   userIntent?.primaryConcern:",
+		userIntent?.primaryConcern
+	);
+
+	// ğŸ”§ å®¹éŒ¯æ¢ä»¶ï¼šå¦‚æœåµæ¸¬åˆ°é›™æ–¹ç”Ÿæ—¥ï¼Œä¸”ç¬¦åˆä»¥ä¸‹ä»»ä¸€æ¢ä»¶ï¼Œå‰‡åŸ·è¡Œåˆå©šåˆ†æï¼š
+	// 1. relationshipAnalysisType æ˜ç¢ºç‚º "couple" (æ¨™æº–æµç¨‹)
+	// 2. primaryConcern æ˜¯ "æ„Ÿæƒ…" (ç”¨æˆ¶é¸æ“‡æ„Ÿæƒ…ä½†å°šæœªæ˜ç¢ºé¸æ“‡åˆå©š/å€‹äºº)
+	const shouldProcessCouple =
+		couplesBirthdayData &&
+		(userIntent?.relationshipAnalysisType === "couple" ||
+			userIntent?.primaryConcern === "æ„Ÿæƒ…");
+
 	console.log(
-		"   æ¢ä»¶æ˜¯å¦æ»¿è¶³:",
-		couplesBirthdayData &&
-			userIntent?.relationshipAnalysisType === "couple"
+		"   shouldProcessCouple:",
+		shouldProcessCouple
 	);
 
-	if (
-		couplesBirthdayData &&
-		userIntent?.relationshipAnalysisType === "couple"
-	) {
+	if (shouldProcessCouple) {
 		// ğŸ¯ è™•ç†åˆå©šåˆ†æçš„é›™æ–¹ç”Ÿæ—¥è¼¸å…¥
 		console.log("ğŸ¯ æª¢æ¸¬åˆ°åˆå©šåˆ†æä¸­çš„é›™æ–¹ç”Ÿæ—¥:", couplesBirthdayData);
+
+		// ğŸ”§ å¦‚æœ relationshipAnalysisType æœªè¨­å®šï¼Œåœ¨é€™è£¡è¨­å®šç‚º "couple"
+		if (!userIntent) {
+			userIntent = new SmartUserIntent({
+				sessionId: sessionId,
+				userEmail: userEmail,
+				userId: userId,
+				conversationActive: true,
+				primaryConcern: "æ„Ÿæƒ…",
+				relationshipAnalysisType: "couple",
+				conversationState: "asking_detailed_report",
+				createdAt: new Date(),
+			});
+		} else if (!userIntent.relationshipAnalysisType || userIntent.relationshipAnalysisType !== "couple") {
+			userIntent.relationshipAnalysisType = "couple";
+			console.log("ğŸ”§ è‡ªå‹•è¨­å®š relationshipAnalysisType = couple (å› æª¢æ¸¬åˆ°é›™æ–¹ç”Ÿæ—¥)");
+		}
 
 		// ğŸš« æª¢æŸ¥æ¯æ—¥åˆæ­¥åˆ†æé™åˆ¶ï¼ˆåˆå©šåˆ†æï¼‰
@@ -3578,6 +3596,19 @@
 				userIntent.originalSpecificProblem ||
 				userIntent.specificQuestion
 			);
+
+			// ğŸ”§ ä¿å­˜ userIntent æ›´æ–°ï¼ˆrelationshipAnalysisType ç­‰ï¼‰
+			if (userIntent) {
+				await userIntent.save();
+			}
 		} catch (error) {
 			console.error("âŒ ç”Ÿæˆåˆå©šåˆ†æå¤±æ•—:", error);
 			response = "å¾ˆæŠ±æ­‰ï¼Œåœ¨åˆ†æä½ å€‘çš„å…«å­—æ™‚é‡åˆ°äº†å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
 			analysis = {
 				detectedTopic: "æ„Ÿæƒ…",
 				isWithinScope: true,
 				confidence: 0.8,
 				specificProblem: "ç³»çµ±éŒ¯èª¤",
 			};
 		}
+
+		// ğŸ¯ ä¸€æ—¦åˆå©šåˆ†æå·²ç”Ÿæˆï¼Œç«‹å³å›å‚³çµæœï¼Œé¿å…å¾ŒçºŒåˆ†æ”¯è¦†è“‹ response
+		return NextResponse.json({
+			response,
+			analysis,
+			systemType: "smart-chat2",
+			timestamp: new Date().toISOString(),
+		});
 	} else if (topicAndBirthdayData) {
