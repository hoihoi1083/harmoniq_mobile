
		// ğŸ”§ å„ªå…ˆæª¢æŸ¥åˆ†æ‰‹ç‹€æ…‹é¸æ“‡ (A, B, C, D) - å¿…é ˆåœ¨ EnhancedMessageAnalyzer ä¹‹å‰
		if (isBreakupChoice && userIntent?.primaryConcern === "æ„Ÿæƒ…") {
			console.log("ğŸ’” æª¢æ¸¬åˆ°åˆ†æ‰‹é¸æ“‡ï¼Œå„ªå…ˆè™•ç†:", message);

			const chatHistory = await ChatHistory.findOne({
				$or: [{ conversationId: sessionId }, { sessionId: sessionId }],
			});

			const hasBreakupOptions = chatHistory?.messages?.some(
				(msg) =>
					msg.role === "assistant" &&
					(msg.content.includes("A. å‰›åˆ†æ‰‹") ||
						msg.content.includes("A. åˆšåˆ†æ‰‹") ||
						msg.content.includes("è«‹é¸æ“‡ä½ çš„æ„Ÿæƒ…ç‹€æ…‹") ||
						msg.content.includes("è¯·é€‰æ‹©ä½ çš„æ„Ÿæƒ…çŠ¶æ€"))
			);

			if (hasBreakupOptions) {
				console.log("âœ… ç¢ºèªæœ‰åˆ†æ‰‹é¸é …æ­·å²ï¼Œè™•ç†é¸æ“‡:", message);
				const breakupChoice = message.trim().toUpperCase().charAt(0);

				// ä½¿ç”¨å·²æœ‰çš„handleråœ¨line 3993-4207è™•ç†å®Œæ•´éŸ¿æ‡‰
				// é€™è£¡åªéœ€è·³è½‰åˆ°é‚£å€‹handler
				console.log("ğŸ¯ è·³è½‰åˆ°ç¾æœ‰çš„åˆ†æ‰‹handlerï¼ŒbreakupChoice:", breakupChoice);
			}
		}
